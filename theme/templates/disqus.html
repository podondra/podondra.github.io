{% if DISQUS_SITENAME and article %}
<button id="disqus_button" class="disqus-comment-count" data-disqus-identifier="{{ article.url }}">
    Comments
</button>
<div id="disqus_thread"></div>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script id="dsq-count-scr" src="//{{ DISQUS_SITENAME}}.disqus.com/count.js" async></script>
<script>
var disqus_config = function () {
    this.page.url = '{{ SITEURL }}';
    this.page.identifier = '{{ article.url }}';
};

$(document).ready(function () {
    $('#disqus_button').on('click', function () {
        var src = '//{{ DISQUS_SITENAME }}.disqus.com/embed.js';
        $.ajax({
            type: 'GET',
            url: src,
            dataType: 'script',
            cache: true,
        });

        $(this).fadeOut();
    });
});
</script>
{% endif %}
